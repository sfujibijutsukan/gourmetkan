{{define "title"}}店舗詳細{{end}}
{{define "content"}}
<section class="panel">
  <h1>{{.Restaurant.Name}}</h1>
  <div class="muted">{{.Restaurant.Description}}</div>
  <div class="distance">{{.Restaurant.Distance}}</div>
  {{if .Restaurant.Tags}}
  <div class="tag-list">
    {{range .Restaurant.Tags}}
      <a class="tag-pill" href="/?tag={{.}}">{{.}}</a>
    {{end}}
  </div>
  {{end}}
  {{if .Restaurant.Address}}<div>住所: {{.Restaurant.Address}}</div>{{end}}
  {{if .Restaurant.MapsURL}}<div><a href="{{.Restaurant.MapsURL}}" target="_blank" rel="noreferrer">Google Maps を開く</a></div>{{end}}
</section>

<section class="panel">
  <h2>口コミ</h2>
  {{if .Reviews}}
  <ul class="review-list">
    {{range .Reviews}}
      <li>
        <div class="review-meta">
          <span class="review-user">@{{.Username}}</span>
          <span class="rating">評価: {{.Rating}}</span>
        </div>
        <div>{{.Comment}}</div>
      </li>
    {{end}}
  </ul>
  {{else}}
  <p>口コミはまだありません。</p>
  {{end}}
</section>

{{if .User}}
<section class="panel">
  <h2>口コミ投稿</h2>
  <form class="form" action="/restaurants/{{.Restaurant.ID}}/reviews" method="post">
    <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
    <label>評価
      <select name="rating">
        <option value="5">5</option>
        <option value="4">4</option>
        <option value="3">3</option>
        <option value="2">2</option>
        <option value="1">1</option>
      </select>
    </label>
    <label>コメント
      <textarea name="comment" required></textarea>
    </label>
    <button type="submit">投稿する</button>
  </form>
</section>
{{else}}
<section class="panel">
  <h2>口コミ投稿</h2>
  <p class="muted">口コミを書くにはログインが必要です。</p>
  <a class="btn" href="/auth/github/login">GitHubでログイン</a>
</section>
{{end}}
{{end}}
{{template "layout" .}}
