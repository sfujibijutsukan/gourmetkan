{{define "title"}}店舗一覧{{end}}
{{define "content"}}
<section class="panel">
  <div class="panel-header">
    <h1>店舗一覧</h1>
    <a class="btn" href="/restaurants/new">店舗登録</a>
    <a class="btn secondary" href="/random">ランダム提案</a>
  </div>
  <form class="tag-filter" method="get" action="/">
    <label>タグで絞り込み
      <select name="tag">
        <option value="">すべて</option>
        {{range .AvailableTags}}
          <option value="{{.Name}}" {{if eq $.SelectedTag .Name}}selected{{end}}>{{.Name}}</option>
        {{end}}
      </select>
    </label>
    <button type="submit">検索</button>
  </form>
  {{if .Restaurants}}
    <ul class="restaurant-list">
      {{range .Restaurants}}
        <li>
          <a href="/restaurants/{{.ID}}">{{.Name}}</a>
          <div class="muted">{{.Description}}</div>
          {{if .Tags}}
          <div class="tag-list">
            {{range .Tags}}
              <a class="tag-pill" href="/?tag={{.}}">{{.}}</a>
            {{end}}
          </div>
          {{end}}
          <div class="distance">{{.Distance}}</div>
        </li>
      {{end}}
    </ul>
  {{else}}
    <p>店舗がまだ登録されていません。</p>
  {{end}}
</section>
{{end}}
{{template "layout" .}}
