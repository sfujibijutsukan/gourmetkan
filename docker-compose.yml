version: "3.9"

services:
  app:
    build: .
    ports:
      - "8080:8080"
    environment:
      GITHUB_CLIENT_ID: ${GITHUB_CLIENT_ID}
      GITHUB_CLIENT_SECRET: ${GITHUB_CLIENT_SECRET}
      BASE_URL: ${BASE_URL:-http://localhost:8080}
      LISTEN_ADDR: ":8080"
      DATABASE_PATH: /app/data/app.db
      COOKIE_SECURE: "false"
    volumes:
      - app-data:/app/data
      - app-backup:/app/backup
    restart: unless-stopped

volumes:
  app-data:
  app-backup:
